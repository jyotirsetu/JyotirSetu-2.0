---
// DailyTipsDisplay.astro - Displays daily astrological tips
---

<div
  class="daily-tips-section bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 py-16"
>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <!-- Section Header -->
    <div class="text-center mb-12">
      <h2 class="text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-4">ğŸŒŸ Daily Cosmic Insights</h2>
      <p class="text-lg text-gray-600 dark:text-gray-300 max-w-2xl mx-auto">
        Discover what the stars have in store for you today with our personalized astrological guidance
      </p>
    </div>

    <!-- Tips Grid -->
    <div id="daily-tips-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      <!-- Tips will be populated here -->
    </div>

    <!-- Loading State -->
    <div id="loading-state" class="text-center py-8">
      <div class="inline-flex items-center px-4 py-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg">
        <div class="animate-spin rounded-full h-4 w-4 border-b-2 border-purple-600 mr-3"></div>
        <span class="text-purple-700 dark:text-purple-300">Loading cosmic insights...</span>
      </div>
    </div>
  </div>
</div>

<script>
  // Type definitions
  interface DailyTip {
    id: number;
    title: string;
    content: string;
    category: string;
    date: string;
    active: boolean;
  }

  // Static daily tips data
  const staticTips: DailyTip[] = [
    {
      id: 1,
      title: "ğŸŒŸ Today's Cosmic Guidance",
      content:
        'The stars align to bring clarity to your decisions. Trust your intuition and embrace new opportunities that come your way.',
      category: 'General',
      date: new Date().toISOString().split('T')[0],
      active: true,
    },
    {
      id: 2,
      title: "ğŸ’« Mercury's Influence",
      content:
        "Communication flows smoothly today. It's an excellent time for important conversations and making connections.",
      category: 'Communication',
      date: new Date().toISOString().split('T')[0],
      active: true,
    },
    {
      id: 3,
      title: 'ğŸŒ™ Lunar Energy',
      content:
        "The moon's energy supports emotional healing and introspection. Take time for self-reflection and inner peace.",
      category: 'Emotional',
      date: new Date().toISOString().split('T')[0],
      active: true,
    },
    {
      id: 4,
      title: 'â˜€ï¸ Solar Power',
      content:
        "The sun's energy boosts your confidence and vitality. Perfect day for taking action on your goals and ambitions.",
      category: 'Energy',
      date: new Date().toISOString().split('T')[0],
      active: true,
    },
    {
      id: 5,
      title: "ğŸ”® Venus's Blessing",
      content: 'Love and harmony are in the air. Focus on relationships and creative endeavors for maximum benefit.',
      category: 'Love',
      date: new Date().toISOString().split('T')[0],
      active: true,
    },
    {
      id: 6,
      title: "âš¡ Mars's Drive",
      content:
        'Your energy and determination are at their peak. Channel this powerful energy into productive activities.',
      category: 'Action',
      date: new Date().toISOString().split('T')[0],
      active: true,
    },
  ];

  // Initialize and display tips
  function initTips() {
    console.log('DailyTipsDisplay: Loading static tips...');
    displayTips(staticTips);
  }

  // Display tips in the grid
  function displayTips(tips: DailyTip[]) {
    const container = document.getElementById('daily-tips-container');
    const loadingState = document.getElementById('loading-state');

    if (!container) return;

    // Hide loading state
    if (loadingState) {
      loadingState.style.display = 'none';
    }

    // Clear container
    container.innerHTML = '';

    // Display each tip
    tips.forEach((tip) => {
      const tipElement = document.createElement('div');
      tipElement.className =
        'bg-white dark:bg-slate-800 rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow duration-300 border border-purple-100 dark:border-purple-800';

      tipElement.innerHTML = `
        <div class="flex items-start space-x-3">
          <div class="flex-shrink-0">
            <div class="w-10 h-10 bg-gradient-to-r from-purple-500 to-blue-500 rounded-lg flex items-center justify-center">
              <span class="text-white text-lg">${getCategoryIcon(tip.category)}</span>
            </div>
          </div>
          <div class="flex-1 min-w-0">
            <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">
              ${tip.title}
            </h3>
            <p class="text-gray-600 dark:text-gray-300 text-sm leading-relaxed">
              ${tip.content}
            </p>
            <div class="mt-3 flex items-center justify-between">
              <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300">
                ${tip.category}
              </span>
              <span class="text-xs text-gray-500 dark:text-gray-400">
                ${new Date(tip.date).toLocaleDateString()}
              </span>
            </div>
          </div>
        </div>
      `;

      container.appendChild(tipElement);
    });
  }

  // Get category icon
  function getCategoryIcon(category: string): string {
    const icons: Record<string, string> = {
      General: 'ğŸŒŸ',
      Communication: 'ğŸ’¬',
      Emotional: 'ğŸ’',
      Energy: 'âš¡',
      Love: 'ğŸ’•',
      Action: 'ğŸš€',
    };
    return icons[category] || 'âœ¨';
  }

  // Initialize when DOM is ready
  document.addEventListener('DOMContentLoaded', initTips);
</script>
